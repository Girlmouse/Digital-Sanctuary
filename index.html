<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Quiet Field</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Jost:wght@200;300&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --amber: #e8913a;
    --gold: #f5c842;
    --deep-orange: #c4541a;
    --sky-top: #1a0a2e;
    --sky-mid: #7b2d00;
    --sky-low: #e8701a;
    --horizon: #ffd166;
    --sun-color: #fff7a1;
    --text-light: rgba(255,245,220,0.92);
  }

  html, body {
    width: 100%; height: 100%;
    overflow: hidden;
    background: #1a0a2e;
    cursor: default;
  }


  /* SCENE CANVAS */
  #scene {
    width: 100vw;
    height: 100vh;
    position: relative;
    overflow: hidden;
  }

  /* SKY */
  #sky {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to bottom,
      #0d0520 0%,
      #3b1060 12%,
      #8b2500 30%,
      #d95f00 48%,
      #f08c00 60%,
      #ffd060 72%,
      #ffe490 78%
    );
  }

  /* CLOUDS */
  .cloud {
    position: absolute;
    border-radius: 50%;
    filter: blur(8px);
    opacity: 0.35;
    animation: driftCloud linear infinite;
  }
  @keyframes driftCloud {
    from { transform: translateX(-120px); }
    to { transform: translateX(calc(100vw + 120px)); }
  }

  /* SUN */
  #sun {
    position: absolute;
    width: 80px; height: 80px;
    left: 50%; bottom: 36%;
    transform: translateX(-50%);
    border-radius: 50%;
    background: radial-gradient(circle, #fffde0 0%, #fff5a0 30%, #ffe066 55%, #ffb300 80%, transparent 100%);
    box-shadow:
      0 0 0 18px rgba(255,230,80,0.13),
      0 0 0 45px rgba(255,200,60,0.09),
      0 0 0 90px rgba(255,170,40,0.07),
      0 0 0 160px rgba(255,140,20,0.05),
      0 0 0 260px rgba(255,110,10,0.03),
      0 0 80px 40px rgba(255,210,60,0.5),
      0 0 160px 80px rgba(255,160,30,0.25),
      0 0 300px 120px rgba(255,120,10,0.12);
    animation: auraPulse 7s ease-in-out infinite;
  }
  @keyframes auraPulse {
    0%, 100% { box-shadow:
      0 0 0 18px rgba(255,230,80,0.13),
      0 0 0 45px rgba(255,200,60,0.09),
      0 0 0 90px rgba(255,170,40,0.07),
      0 0 0 160px rgba(255,140,20,0.05),
      0 0 0 260px rgba(255,110,10,0.03),
      0 0 80px 40px rgba(255,210,60,0.5),
      0 0 160px 80px rgba(255,160,30,0.25),
      0 0 300px 120px rgba(255,120,10,0.12); }
    50% { box-shadow:
      0 0 0 22px rgba(255,235,90,0.16),
      0 0 0 55px rgba(255,210,70,0.12),
      0 0 0 110px rgba(255,180,50,0.09),
      0 0 0 190px rgba(255,150,30,0.07),
      0 0 0 300px rgba(255,120,15,0.04),
      0 0 90px 50px rgba(255,220,70,0.6),
      0 0 180px 95px rgba(255,170,40,0.30),
      0 0 340px 140px rgba(255,130,15,0.15); }
  }

  /* HORIZON GLOW */
  #horizon-glow {
    position: absolute;
    bottom: 33%;
    left: 0; right: 0;
    height: 80px;
    background: linear-gradient(to top, rgba(255,210,80,0.5), transparent);
    filter: blur(10px);
  }

  /* BIRDS IN SKY */
  .sky-bird {
    position: absolute;
    opacity: 0;
    animation: birdFly linear infinite;
  }
  .sky-bird svg { fill: none; stroke: rgba(20,5,40,0.7); stroke-width: 1.5; }
  @keyframes birdFly {
    0% { opacity: 0; transform: translateX(-80px) translateY(0px) scale(0.6); }
    5% { opacity: 0.7; }
    45% { transform: translateX(45vw) translateY(-30px) scale(0.7); }
    55% { transform: translateX(55vw) translateY(-20px) scale(0.75); }
    95% { opacity: 0.5; }
    100% { opacity: 0; transform: translateX(calc(100vw + 80px)) translateY(-10px) scale(0.8); }
  }

  /* HILLS */
  #hills {
    position: absolute;
    bottom: 31%;
    left: 0; right: 0;
    height: 130px;
    z-index: 1;
  }



  /* GRASS CLUMPS */
  .grass-clump {
    position: absolute;
    bottom: 0;
    pointer-events: none;
    transform-origin: bottom center;
    animation: gentleSway linear infinite;
    z-index: 6;
  }

  /* FIELD */
  #field {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 38%;
    background: linear-gradient(
      to bottom,
      #3a1500 0%,
      #2e1200 7%,
      #261000 15%,
      #1e1200 25%,
      #1a1800 38%,
      #162000 52%,
      #142400 68%,
      #101e00 85%,
      #0c1600 100%
    );
    z-index: 2;
  }

  /* FIELD SIDE LIGHTING - warm sunset glow on left, cooler shadow on right */
  #field-lighting {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 38%;
    z-index: 3;
    pointer-events: none;
    background:
      radial-gradient(ellipse 70% 50% at 50% 0%, rgba(220,130,30,0.25) 0%, transparent 65%),
      radial-gradient(ellipse 40% 60% at 15% 40%, rgba(200,100,15,0.12) 0%, transparent 55%),
      radial-gradient(ellipse 35% 50% at 85% 45%, rgba(100,60,10,0.14) 0%, transparent 55%),
      linear-gradient(180deg,
        rgba(180,90,10,0.18) 0%,
        rgba(100,55,5,0.09) 30%,
        transparent 60%
      );
  }

  /* FIELD TEXTURE - subtle vertical stalks suggestion */
  #field-texture {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 38%;
    z-index: 4;
    pointer-events: none;
    background:
      repeating-linear-gradient(
        91deg,
        transparent 0px,
        transparent 10px,
        rgba(0,15,0,0.07) 10px,
        rgba(0,15,0,0.07) 11px
      ),
      repeating-linear-gradient(
        89deg,
        transparent 0px,
        transparent 17px,
        rgba(20,60,0,0.05) 17px,
        rgba(20,60,0,0.05) 18px
      ),
      repeating-linear-gradient(
        93deg,
        transparent 0px,
        transparent 27px,
        rgba(0,10,0,0.04) 27px,
        rgba(0,10,0,0.04) 28px
      );
  }

  /* GROUND */
  #ground {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 8%;
    background: linear-gradient(to bottom, #0a1a00, #050d00);
    z-index: 10;
  }

  /* WHEAT/SUNFLOWER CONTAINER */
  #sunflower-container {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2;
    pointer-events: none;
  }

  /* WHEAT STALKS */
  .sunflower {
    position: absolute;
    bottom: 0;
    transform-origin: bottom center;
    transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    cursor: default;
  }
  .sunflower.sway-left { transform: rotate(-4deg); }
  .sunflower.sway-right { transform: rotate(4deg); }

  /* gentle ambient sway */
  @keyframes gentleSway {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-2deg); }
    75% { transform: rotate(2deg); }
  }
  .sunflower { animation: gentleSway linear infinite; }

  /* FLYING INSECTS */
  .insect {
    position: absolute;
    pointer-events: none;
    z-index: 8;
  }
  @keyframes insectFloat {
    0%   { transform: translate(0px, 0px); }
    15%  { transform: translate(6px, -8px); }
    30%  { transform: translate(-4px, -14px); }
    45%  { transform: translate(8px, -6px); }
    60%  { transform: translate(-6px, -18px); }
    75%  { transform: translate(4px, -10px); }
    90%  { transform: translate(-8px, -5px); }
    100% { transform: translate(0px, 0px); }
  }
  @keyframes insectDrift {
    0%   { left: -10px; }
    100% { left: calc(100vw + 10px); }
  }
  @keyframes insectBob {
    0%, 100% { margin-top: 0px; }
    50%       { margin-top: -12px; }
  }

  /* AUDIO CONTROL */
  #audio-btn {
    position: fixed;
    bottom: 24px;
    right: 28px;
    z-index: 200;
    width: 44px; height: 44px;
    border-radius: 50%;
    border: 1px solid rgba(255,220,140,0.3);
    background: rgba(10,3,20,0.6);
    backdrop-filter: blur(8px);
    color: rgba(255,230,160,0.8);
    font-size: 18px;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
  }
  #audio-btn:hover {
    background: rgba(30,10,50,0.8);
    border-color: rgba(255,220,140,0.6);
    color: rgba(255,230,160,1);
  }

  /* SITE NAME */
  #site-name {
    position: fixed;
    bottom: 24px;
    left: 28px;
    z-index: 200;
    font-family: 'Cormorant Garamond', serif;
    font-size: 0.85rem;
    font-weight: 300;
    letter-spacing: 0.25em;
    color: rgba(255,220,140,0.4);
    text-transform: uppercase;
  }

  /* GRASS CONTAINER */
  #grass-container {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
  }

  /* INSECT CONTAINER */
  #insect-container {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 8;
    overflow: hidden;
  }

  /* SHIMMER on field */
  #field-shimmer {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 36%;
    background: radial-gradient(ellipse at 50% 100%, rgba(255,180,50,0.08) 0%, transparent 60%);
    z-index: 4;
    pointer-events: none;
  }
</style>
</head>
<body>
</div>

<!-- AUDIO (placeholder - swap src for your audio file) -->
<audio id="ambient-audio" loop></audio>

<div id="scene">
  <!-- SKY -->
  <div id="sky"></div>

  <!-- CLOUDS -->
  <div class="cloud" style="width:260px;height:80px;top:8%;left:-50px;background:rgba(180,80,20,0.6);animation-duration:90s;animation-delay:0s;"></div>
  <div class="cloud" style="width:180px;height:50px;top:14%;left:20%;background:rgba(150,60,10,0.5);animation-duration:120s;animation-delay:-30s;"></div>
  <div class="cloud" style="width:320px;height:90px;top:6%;left:60%;background:rgba(200,100,30,0.5);animation-duration:100s;animation-delay:-60s;"></div>
  <div class="cloud" style="width:140px;height:45px;top:20%;left:70%;background:rgba(120,50,10,0.4);animation-duration:80s;animation-delay:-20s;"></div>

  <!-- SUN -->
  <div id="sun"></div>
  <div id="horizon-glow"></div>

  <!-- SKY BIRDS -->
  <div class="sky-bird" style="top:17%;animation-duration:22s;animation-delay:4s;">
    <svg width="70" height="28" viewBox="0 0 70 28">
      <path d="M2,14 Q17,3 35,14 Q52,3 68,14" stroke="rgba(15,5,35,0.75)" stroke-width="2.5" fill="none" stroke-linecap="round"/>
    </svg>
  </div>
  <div class="sky-bird" style="top:23%;animation-duration:30s;animation-delay:10s;">
    <svg width="55" height="22" viewBox="0 0 55 22">
      <path d="M2,11 Q14,2 27,11 Q40,2 53,11" stroke="rgba(15,5,35,0.65)" stroke-width="2.2" fill="none" stroke-linecap="round"/>
    </svg>
  </div>
  <div class="sky-bird" style="top:13%;animation-duration:38s;animation-delay:18s;">
    <svg width="80" height="32" viewBox="0 0 80 32">
      <path d="M2,16 Q20,3 40,16 Q60,3 78,16" stroke="rgba(15,5,35,0.70)" stroke-width="2.8" fill="none" stroke-linecap="round"/>
    </svg>
  </div>
  <div class="sky-bird" style="top:20%;animation-duration:26s;animation-delay:32s;">
    <svg width="60" height="24" viewBox="0 0 60 24">
      <path d="M2,12 Q15,2 30,12 Q45,2 58,12" stroke="rgba(15,5,35,0.68)" stroke-width="2.3" fill="none" stroke-linecap="round"/>
    </svg>
  </div>
  <div class="sky-bird" style="top:19%;animation-duration:20s;animation-delay:48s;">
    <svg width="50" height="20" viewBox="0 0 50 20">
      <path d="M2,10 Q12,2 25,10 Q37,2 48,10" stroke="rgba(15,5,35,0.60)" stroke-width="2" fill="none" stroke-linecap="round"/>
    </svg>
  </div>

  <!-- HILLS -->
  <div id="hills">
    <svg viewBox="0 0 1440 130" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="hillFade" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#1a0800" stop-opacity="0.9"/>
          <stop offset="100%" stop-color="#1a0800" stop-opacity="0"/>
        </linearGradient>
        <linearGradient id="hillFade2" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#120600" stop-opacity="0.75"/>
          <stop offset="100%" stop-color="#120600" stop-opacity="0"/>
        </linearGradient>
      </defs>
      <!-- far soft hills, fading at bottom so no hard edge -->
      <ellipse cx="720" cy="110" rx="560" ry="75" fill="url(#hillFade2)"/>
      <ellipse cx="300" cy="120" rx="380" ry="60" fill="url(#hillFade2)"/>
      <ellipse cx="1140" cy="115" rx="400" ry="65" fill="url(#hillFade2)"/>
      <!-- closer hills - peak shapes only, fading into field -->
      <ellipse cx="720" cy="118" rx="480" ry="68" fill="url(#hillFade)"/>
      <ellipse cx="360" cy="124" rx="340" ry="55" fill="url(#hillFade)"/>
      <ellipse cx="1080" cy="122" rx="360" ry="58" fill="url(#hillFade)"/>
    </svg>
  </div>


  <!-- FIELD -->
  <div id="field"></div>
  <div id="field-lighting"></div>
  <div id="field-texture"></div>
  <div id="field-shimmer"></div>

  <!-- GRASS LAYER - behind sunflowers -->
  <div id="grass-container"></div>

  <!-- SUNFLOWERS - rendered by JS -->
  <div id="sunflower-container"></div>


  <!-- INSECTS -->
  <div id="insect-container"></div>

  <!-- GROUND -->
  <div id="ground"></div>
</div>

<!-- BOTTOM UI -->
<div id="site-name">The Quiet Field</div>
<button id="audio-btn" title="Sound on/off">♪</button>

<script>
// ── CONFIG (easy to update) ──────────────────────────────────
const AUDIO_SRC = "audio/ambient.mp3";
// ────────────────────────────────────────────────────────────


// WHEAT GENERATION
const container = document.getElementById('sunflower-container');

function makeWheat(x, stemH, thickness, color, headLen, droop, delay, zBase) {
  const el = document.createElement('div');
  el.className = 'sunflower'; // reuse sway animation class
  el.style.left = x + 'px';
  el.style.animationDuration = (3 + Math.random() * 5) + 's';
  el.style.animationDelay = delay + 's';
  el.style.zIndex = zBase;

  const svgNS = "http://www.w3.org/2000/svg";
  const svg = document.createElementNS(svgNS, "svg");
  const w = headLen * 2 + 20;
  const totalH = stemH + headLen + 10;
  svg.setAttribute("width", w);
  svg.setAttribute("height", totalH);
  svg.setAttribute("viewBox", `0 0 ${w} ${totalH}`);

  const cx = w / 2;

  // stem - slightly curved
  const curve = (Math.random() - 0.5) * 12;
  const stem = document.createElementNS(svgNS, "path");
  stem.setAttribute("d", `M${cx},${totalH} Q${cx + curve},${totalH * 0.55} ${cx + droop * 0.4},${10 + headLen}`);
  stem.setAttribute("stroke", color);
  stem.setAttribute("stroke-width", thickness);
  stem.setAttribute("fill", "none");
  stem.setAttribute("stroke-linecap", "round");
  svg.appendChild(stem);

  // small side leaves / nodes on stem
  const leafCount = 1 + Math.floor(Math.random() * 2);
  for (let l = 0; l < leafCount; l++) {
    const ly = totalH * (0.4 + l * 0.22);
    const lx = cx + curve * (ly / totalH);
    const dir = l % 2 === 0 ? 1 : -1;
    const leaf = document.createElementNS(svgNS, "path");
    leaf.setAttribute("d", `M${lx},${ly} Q${lx + dir * 12},${ly - 6} ${lx + dir * 18},${ly - 2}`);
    leaf.setAttribute("stroke", color);
    leaf.setAttribute("stroke-width", thickness * 0.6);
    leaf.setAttribute("fill", "none");
    leaf.setAttribute("stroke-linecap", "round");
    leaf.setAttribute("opacity", "0.8");
    svg.appendChild(leaf);
  }

  // wheat head — drooping ear with bristles (awns)
  const hx = cx + droop * 0.4;
  const hy = 10 + headLen;
  // main ear body
  const ear = document.createElementNS(svgNS, "path");
  ear.setAttribute("d", `M${hx},${hy} Q${hx + droop},${hy - headLen * 0.5} ${hx + droop * 1.1},${hy - headLen}`);
  ear.setAttribute("stroke", color);
  ear.setAttribute("stroke-width", thickness * 1.8);
  ear.setAttribute("fill", "none");
  ear.setAttribute("stroke-linecap", "round");
  svg.appendChild(ear);

  // awns (the little bristles on wheat head)
  const awnCount = 4 + Math.floor(Math.random() * 4);
  for (let a = 0; a < awnCount; a++) {
    const t = a / (awnCount - 1);
    // interpolate along ear curve
    const ax = hx + droop * 1.1 * t * 0.9;
    const ay = hy - headLen * t * 0.95;
    const awnDir = (Math.random() - 0.3);
    const awn = document.createElementNS(svgNS, "line");
    awn.setAttribute("x1", ax); awn.setAttribute("y1", ay);
    awn.setAttribute("x2", ax + awnDir * 10); awn.setAttribute("y2", ay - 10);
    awn.setAttribute("stroke", color);
    awn.setAttribute("stroke-width", thickness * 0.4);
    awn.setAttribute("stroke-linecap", "round");
    awn.setAttribute("opacity", "0.85");
    svg.appendChild(awn);
  }

  el.appendChild(svg);
  el.dataset.x = x;
  container.appendChild(el);
  return el;
}

const flowers = []; // keep var name for mouse sway compat
const vw = window.innerWidth;

// Color palette - warm ambers, golds, silhouette darks backlit by sunset
const wheatColors = [
  '#8b5a00', '#a06800', '#b87800', '#c8880a',  // mid browns
  '#d49420', '#e0a830', '#c07010', '#9a6205',   // warm golds
  '#3d2000', '#2a1500', '#4a2800', '#5a3200',   // dark silhouette (backlit)
  '#e8b840', '#d4a020', '#f0c050',              // bright catches of light
];

function randColor() { return wheatColors[Math.floor(Math.random() * wheatColors.length)]; }

// LAYER 1 — tiny distant silhouettes at horizon
const l1Count = Math.floor(vw / 4);
for (let i = 0; i < l1Count; i++) {
  const x = (i / l1Count) * vw + (Math.random() - 0.5) * 6;
  const h = 18 + Math.random() * 22;
  const droop = (Math.random() - 0.3) * 10;
  flowers.push(makeWheat(x, h, 0.6 + Math.random() * 0.5, '#1e0e00', 8 + Math.random() * 6, droop, Math.random() * -14, 2));
}

// LAYER 2 — short background, dark warm browns
const l2Count = Math.floor(vw / 5);
for (let i = 0; i < l2Count; i++) {
  const x = (i / l2Count) * vw + (Math.random() - 0.5) * 8;
  const h = 30 + Math.random() * 30;
  const droop = (Math.random() - 0.3) * 14;
  flowers.push(makeWheat(x, h, 0.8 + Math.random() * 0.6, '#2a1400', 11 + Math.random() * 7, droop, Math.random() * -12, 2));
}

// LAYER 3 — medium-short, amber tones starting to appear
const l3Count = Math.floor(vw / 6);
for (let i = 0; i < l3Count; i++) {
  const x = (i / l3Count) * vw + (Math.random() - 0.5) * 10;
  const h = 50 + Math.random() * 40;
  const droop = (Math.random() - 0.3) * 18;
  flowers.push(makeWheat(x, h, 0.9 + Math.random() * 0.7, randColor(), 14 + Math.random() * 10, droop, Math.random() * -11, 3));
}

// LAYER 4 — medium, warm amber/brown mix
const l4Count = Math.floor(vw / 7);
for (let i = 0; i < l4Count; i++) {
  const x = (i / l4Count) * vw + (Math.random() - 0.5) * 12;
  const h = 70 + Math.random() * 55;
  const droop = (Math.random() - 0.32) * 24;
  flowers.push(makeWheat(x, h, 1 + Math.random() * 0.8, randColor(), 17 + Math.random() * 13, droop, Math.random() * -10, 3));
}

// LAYER 5 — mid height, varied lit and silhouette
const l5Count = Math.floor(vw / 9);
for (let i = 0; i < l5Count; i++) {
  const x = (i / l5Count) * vw + (Math.random() - 0.5) * 14;
  const h = 95 + Math.random() * 70;
  const droop = (Math.random() - 0.35) * 28;
  flowers.push(makeWheat(x, h, 1.1 + Math.random() * 0.9, randColor(), 20 + Math.random() * 16, droop, Math.random() * -9, 4));
}

// LAYER 6 — mid-tall, richer golds
const l6Count = Math.floor(vw / 11);
for (let i = 0; i < l6Count; i++) {
  const x = (i / l6Count) * vw + (Math.random() - 0.5) * 16;
  const h = 115 + Math.random() * 75;
  const droop = (Math.random() - 0.38) * 33;
  flowers.push(makeWheat(x, h, 1.3 + Math.random() * 1, randColor(), 23 + Math.random() * 17, droop, Math.random() * -8, 4));
}

// LAYER 7 — tall, dramatic backlit silhouettes + golden catches
const l7Count = Math.floor(vw / 13);
for (let i = 0; i < l7Count; i++) {
  const x = (i / l7Count) * vw + (Math.random() - 0.5) * 18;
  const h = 145 + Math.random() * 90;
  const droop = (Math.random() - 0.4) * 38;
  const col = Math.random() > 0.5 ? '#1a0a00' : randColor();
  flowers.push(makeWheat(x, h, 1.4 + Math.random() * 1.1, col, 26 + Math.random() * 20, droop, Math.random() * -7, 5));
}

// LAYER 8 — tallest foreground, very dark silhouettes dominant
const l8Count = Math.floor(vw / 16);
for (let i = 0; i < l8Count; i++) {
  const x = (i / l8Count) * vw + (Math.random() - 0.5) * 22;
  const h = 175 + Math.random() * 110;
  const droop = (Math.random() - 0.42) * 45;
  const col = Math.random() > 0.35 ? '#150800' : randColor();
  flowers.push(makeWheat(x, h, 1.6 + Math.random() * 1.3, col, 30 + Math.random() * 24, droop, Math.random() * -6, 6));
}

// GRASS CLUMPS - scattered lighter green tufts across field
const grassContainer = document.getElementById('grass-container');
const svgNS2 = "http://www.w3.org/2000/svg";

function makeGrassClump(x, scale, zIndex) {
  const el = document.createElement('div');
  el.className = 'grass-clump';
  el.style.left = x + 'px';
  el.style.animationDuration = (3 + Math.random() * 5) + 's';
  el.style.animationDelay = (Math.random() * -10) + 's';
  el.style.zIndex = zIndex;

  const svg = document.createElementNS(svgNS2, 'svg');
  const w = (30 + Math.random() * 40) * scale;
  const h = (35 + Math.random() * 50) * scale;
  svg.setAttribute('width', w);
  svg.setAttribute('height', h);
  svg.setAttribute('viewBox', `0 0 ${w} ${h}`);

  // lighter, more visible greens that contrast against dark field
  const bladeColors = [
    '#6abf3a','#7dd444','#5aaa28','#8cd955','#4e9e22',
    '#72c93e','#90e050','#5db830','#a0d860','#65b535'
  ];
  const bladeCount = 5 + Math.floor(Math.random() * 6);
  for (let b = 0; b < bladeCount; b++) {
    const bx = (b / bladeCount) * w * 0.85 + w * 0.07 + (Math.random()-0.5) * 6;
    const bend = (Math.random() - 0.5) * w * 0.55;
    const bh = h * (0.55 + Math.random() * 0.45);
    const strokeW = 2 + Math.random() * 2.5;
    const path = document.createElementNS(svgNS2, 'path');
    // curved blade with slight taper feel using quadratic bezier
    path.setAttribute('d', `M${bx},${h} Q${bx + bend * 0.5},${h - bh * 0.55} ${bx + bend},${h - bh}`);
    path.setAttribute('stroke', bladeColors[Math.floor(Math.random() * bladeColors.length)]);
    path.setAttribute('stroke-width', strokeW);
    path.setAttribute('fill', 'none');
    path.setAttribute('stroke-linecap', 'round');
    path.setAttribute('opacity', 0.75 + Math.random() * 0.25);
    svg.appendChild(path);
  }

  // bush blob underneath some clumps
  if (Math.random() > 0.4) {
    const bushColors = ['#3a7a10','#4a9018','#558a20','#3d8012','#47961a'];
    const bush = document.createElementNS(svgNS2, 'ellipse');
    bush.setAttribute('cx', w/2); bush.setAttribute('cy', h * 0.82);
    bush.setAttribute('rx', w * 0.42); bush.setAttribute('ry', h * 0.14);
    bush.setAttribute('fill', bushColors[Math.floor(Math.random() * bushColors.length)]);
    bush.setAttribute('opacity', '0.85');
    svg.insertBefore(bush, svg.firstChild);
  }

  el.appendChild(svg);
  grassContainer.appendChild(el);
}

// Dense scatter of grass clumps — behind all sunflower layers (z=1)
const gcCount = Math.floor(vw / 14);
for (let i = 0; i < gcCount; i++) {
  const gx = Math.random() * vw;
  const gs = 0.6 + Math.random() * 1.4;
  makeGrassClump(gx, gs, 1);
}


// FLYING INSECTS
(function() {
  const ic = document.getElementById('insect-container');
  const vh = window.innerHeight;
  const vw = window.innerWidth;

  // insects live in the zone between field top and mid-sky
  // roughly 20%-65% from top of screen
  const insects = [
    // [delay, duration, topPct, size, opacity, driftDuration]
    [0,    3.2, 38, 2.5, 0.7, 28],
    [2.5,  2.8, 44, 2,   0.6, 35],
    [5,    3.5, 35, 3,   0.8, 22],
    [1.2,  2.5, 50, 2,   0.55,40],
    [7,    3.8, 42, 2.5, 0.65,32],
    [3.8,  2.2, 36, 2,   0.5, 45],
    [9,    3,   48, 3,   0.7, 26],
    [4.5,  2.6, 40, 2,   0.6, 38],
    [11,   3.3, 33, 2.5, 0.6, 30],
    [6.5,  2.9, 46, 2,   0.5, 42],
    [13,   3.1, 52, 3,   0.65,24],
    [8.2,  2.4, 38, 2,   0.55,36],
    [15,   3.6, 44, 2.5, 0.7, 28],
    [10.5, 2.7, 41, 2,   0.6, 33],
    [17,   3.0, 37, 3,   0.6, 40],
  ];

  insects.forEach(([delay, floatDur, topPct, size, opacity, driftDur]) => {
    const el = document.createElement('div');
    el.className = 'insect';
    el.style.top = topPct + '%';
    el.style.opacity = opacity;

    // tiny SVG insect - just a dot with two tiny wings
    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('width', size * 6);
    svg.setAttribute('height', size * 4);
    svg.setAttribute('viewBox', '0 0 12 8');

    // body
    const body = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');
    body.setAttribute('cx', '6'); body.setAttribute('cy', '5');
    body.setAttribute('rx', '1.2'); body.setAttribute('ry', '2');
    body.setAttribute('fill', 'rgba(20,8,0,0.85)');
    svg.appendChild(body);

    // left wing
    const lw = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');
    lw.setAttribute('cx', '3.5'); lw.setAttribute('cy', '4');
    lw.setAttribute('rx', '2.8'); lw.setAttribute('ry', '1.2');
    lw.setAttribute('fill', 'rgba(200,160,80,0.25)');
    lw.setAttribute('transform', 'rotate(-15,3.5,4)');
    svg.appendChild(lw);

    // right wing
    const rw = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse');
    rw.setAttribute('cx', '8.5'); rw.setAttribute('cy', '4');
    rw.setAttribute('rx', '2.8'); rw.setAttribute('ry', '1.2');
    rw.setAttribute('fill', 'rgba(200,160,80,0.25)');
    rw.setAttribute('transform', 'rotate(15,8.5,4)');
    svg.appendChild(rw);

    el.appendChild(svg);

    // floating bob animation
    el.style.animation = `insectFloat ${floatDur}s ease-in-out ${delay}s infinite, insectDrift ${driftDur}s linear ${delay * -1}s infinite`;
    el.style.position = 'absolute';

    ic.appendChild(el);
  });
})();

// Audio toggle
const audio = document.getElementById('ambient-audio');
const audioBtn = document.getElementById('audio-btn');
let audioOn = false;
if (AUDIO_SRC) audio.src = AUDIO_SRC;

audioBtn.addEventListener('click', () => {
  if (!AUDIO_SRC) { audioBtn.textContent = '♪'; return; }
  if (audioOn) {
    audio.pause();
    audioBtn.textContent = '♪';
    audioBtn.style.opacity = '0.5';
    audioOn = false;
  } else {
    audio.play();
    audioBtn.textContent = '♫';
    audioBtn.style.opacity = '1';
    audioOn = true;
  }
});
</script>
</body>
</html>
